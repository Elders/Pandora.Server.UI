@model Tuple<string, string, ConfigurationDTO>

@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@{
    var cluster = Model.Item3.Clusters.Single(x => x.Cluster.Name == Model.Item1);
    var machine = Model.Item3.Machines.Single(x => x.Cluster.Name == Model.Item1 && x.Name == Model.Item2);
}

<div class="row">
    <div class="col-lg-12">
        <form action="" method="post">
            <div class="row">
                <h2>@Model.Item2</h2>
            </div>
            <hr />
            <div class="table-responsive row">
                <table class="table table-hover">
                    <thead>
                        <tr>
                            <th>Key</th>
                            <th>Value</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        @for (var i = 0; i < machine.Settings.Count; ++i)
                        {
                            @Html.EditorFor(x => machine.Settings[i],
                                        "SettingEditor",
                                        new
                                        {
                                            index = i,
                                            IsDisabled = cluster.Cluster.Access.HasAccess(Access.WriteAccess) ? string.Empty : "disabled",
                                            CanEditKey = false
                                        })
                        }
                    </tbody>
                </table>
            </div>
            @if (cluster.Cluster.Access.HasAccess(Access.WriteAccess))
            {
                <hr />
                <div class="row">
                    <div class="col-lg-2">
                        <div class="form-group">
                            <input class="btn btn-success" type="submit" name="submit" value="Save" />
                        </div>
                    </div>
                </div>
            }
        </form>
    </div>
</div>